<!DOCTYPE html>
<html>

<body>
<div id="main"></div>

</body>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script type="application/javascript">
    $(document).ready(function () {


        $.ajax({
            url: '/webm_stock/api/files',
            type: 'GET',
            dataType: 'json',
            headers: {
                'Access-Control-Allow-Origin': '*'
            },
            contentType: 'application/json; charset=utf-8',
            success: function (result) {
                result.forEach(function(item)
                {
                    var tag =  $('<img/>', {
                            'class' : 'fvideo',
                            src: item.base_url + item.thumbnail
                    });

                    tag.click(function(e){
                        var data = $(e.target).data('file')
                        var video =  $('<video/>', {
                            controls : "",
                            autoplay: ""
                        })
                        var source =  $('<source/>', {
                            src: item.base_url + item.path
                        })
                        source.appendTo(video)
                        video.appendTo('#main')
                    })
                    tag.data("file", item);
                    tag.appendTo('#main');

                })


            },
            error: function (error) {
                console.log(error)
            }

        })
    });
</script>
</html>
